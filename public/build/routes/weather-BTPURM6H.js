import {
  Alert_default,
  Box_default,
  Button_default,
  Card_default,
  CircularProgress_default,
  Container_default,
  Grid_default,
  IconButton_default,
  InputAdornment_default,
  Snackbar_default,
  TextField_default,
  Typography_default,
  init_utils,
  require_node,
  utils_exports
} from "/build/_shared/chunk-UO2AQSH4.js";
import {
  require_interopRequireDefault
} from "/build/_shared/chunk-FFFQLQI3.js";
import "/build/_shared/chunk-PLT55Z5M.js";
import {
  useActionData,
  useFetcher,
  useLoaderData
} from "/build/_shared/chunk-XU2DGYEO.js";
import {
  createHotContext
} from "/build/_shared/chunk-VBXOWJ6H.js";
import {
  require_jsx_runtime
} from "/build/_shared/chunk-Y6RJRNBS.js";
import {
  require_jsx_dev_runtime
} from "/build/_shared/chunk-F4KNNEUR.js";
import {
  require_react
} from "/build/_shared/chunk-2Z2JGDFU.js";
import "/build/_shared/chunk-JR22VO6P.js";
import {
  __commonJS,
  __toCommonJS,
  __toESM
} from "/build/_shared/chunk-PZDJHGND.js";

// node_modules/@mui/icons-material/utils/createSvgIcon.js
var require_createSvgIcon = __commonJS({
  "node_modules/@mui/icons-material/utils/createSvgIcon.js"(exports) {
    "use strict";
    "use client";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    Object.defineProperty(exports, "default", {
      enumerable: true,
      get: function() {
        return _utils.createSvgIcon;
      }
    });
    var _utils = (init_utils(), __toCommonJS(utils_exports));
  }
});

// node_modules/@mui/icons-material/AddLocation.js
var require_AddLocation = __commonJS({
  "node_modules/@mui/icons-material/AddLocation.js"(exports) {
    "use strict";
    "use client";
    var _interopRequireDefault = require_interopRequireDefault();
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.default = void 0;
    var _createSvgIcon = _interopRequireDefault(require_createSvgIcon());
    var _jsxRuntime = require_jsx_runtime();
    var _default = exports.default = (0, _createSvgIcon.default)(/* @__PURE__ */ (0, _jsxRuntime.jsx)("path", {
      d: "M12 2C8.14 2 5 5.14 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7m4 8h-3v3h-2v-3H8V8h3V5h2v3h3z"
    }), "AddLocation");
  }
});

// node_modules/@mui/icons-material/Delete.js
var require_Delete = __commonJS({
  "node_modules/@mui/icons-material/Delete.js"(exports) {
    "use strict";
    "use client";
    var _interopRequireDefault = require_interopRequireDefault();
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.default = void 0;
    var _createSvgIcon = _interopRequireDefault(require_createSvgIcon());
    var _jsxRuntime = require_jsx_runtime();
    var _default = exports.default = (0, _createSvgIcon.default)(/* @__PURE__ */ (0, _jsxRuntime.jsx)("path", {
      d: "M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"
    }), "Delete");
  }
});

// node_modules/@mui/icons-material/Air.js
var require_Air = __commonJS({
  "node_modules/@mui/icons-material/Air.js"(exports) {
    "use strict";
    "use client";
    var _interopRequireDefault = require_interopRequireDefault();
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.default = void 0;
    var _createSvgIcon = _interopRequireDefault(require_createSvgIcon());
    var _jsxRuntime = require_jsx_runtime();
    var _default = exports.default = (0, _createSvgIcon.default)(/* @__PURE__ */ (0, _jsxRuntime.jsx)("path", {
      d: "M14.5 17c0 1.65-1.35 3-3 3s-3-1.35-3-3h2c0 .55.45 1 1 1s1-.45 1-1-.45-1-1-1H2v-2h9.5c1.65 0 3 1.35 3 3M19 6.5C19 4.57 17.43 3 15.5 3S12 4.57 12 6.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S16.33 8 15.5 8H2v2h13.5c1.93 0 3.5-1.57 3.5-3.5m-.5 4.5H2v2h16.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5v2c1.93 0 3.5-1.57 3.5-3.5S20.43 11 18.5 11"
    }), "Air");
  }
});

// node_modules/@mui/icons-material/Opacity.js
var require_Opacity = __commonJS({
  "node_modules/@mui/icons-material/Opacity.js"(exports) {
    "use strict";
    "use client";
    var _interopRequireDefault = require_interopRequireDefault();
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.default = void 0;
    var _createSvgIcon = _interopRequireDefault(require_createSvgIcon());
    var _jsxRuntime = require_jsx_runtime();
    var _default = exports.default = (0, _createSvgIcon.default)(/* @__PURE__ */ (0, _jsxRuntime.jsx)("path", {
      d: "M17.66 8 12 2.35 6.34 8C4.78 9.56 4 11.64 4 13.64s.78 4.11 2.34 5.67 3.61 2.35 5.66 2.35 4.1-.79 5.66-2.35S20 15.64 20 13.64 19.22 9.56 17.66 8M6 14c.01-2 .62-3.27 1.76-4.4L12 5.27l4.24 4.38C17.38 10.77 17.99 12 18 14z"
    }), "Opacity");
  }
});

// node_modules/@mui/icons-material/Umbrella.js
var require_Umbrella = __commonJS({
  "node_modules/@mui/icons-material/Umbrella.js"(exports) {
    "use strict";
    "use client";
    var _interopRequireDefault = require_interopRequireDefault();
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.default = void 0;
    var _createSvgIcon = _interopRequireDefault(require_createSvgIcon());
    var _jsxRuntime = require_jsx_runtime();
    var _default = exports.default = (0, _createSvgIcon.default)(/* @__PURE__ */ (0, _jsxRuntime.jsx)("path", {
      d: "M14.5 6.92 13 5.77V3.4c0-.26.22-.48.5-.48s.5.21.5.48V4h2v-.6C16 2.07 14.88 1 13.5 1S11 2.07 11 3.4v2.37L9.5 6.92 6 6.07l5.05 15.25c.15.45.55.68.95.68s.8-.23.95-.69L18 6.07zM13.28 8.5l.76.58.92-.23L13 14.8V8.29zm-3.32.59.76-.58.28-.22v6.51L9.03 8.86z"
    }), "Umbrella");
  }
});

// app/routes/weather.tsx
var import_node = __toESM(require_node());
var import_react3 = __toESM(require_react());

// app/components/AddCityForm.tsx
var import_react = __toESM(require_react());
var import_AddLocation = __toESM(require_AddLocation());
var import_jsx_dev_runtime = __toESM(require_jsx_dev_runtime());
if (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {
  console.warn("remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.");
} else {
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = (type, id) => {
    window.$RefreshRuntime$.register(type, '"app/components/AddCityForm.tsx"' + id);
  };
  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;
}
var prevRefreshReg;
var prevRefreshSig;
var _s = $RefreshSig$();
if (import.meta) {
  import.meta.hot = createHotContext(
    //@ts-expect-error
    "app/components/AddCityForm.tsx"
  );
  import.meta.hot.lastModified = "1721403514594.0786";
}
function AddCityForm({
  onAddCity
}) {
  _s();
  const [city, setCity] = (0, import_react.useState)("");
  const handleSubmit = (event) => {
    event.preventDefault();
    if (city.trim()) {
      onAddCity(city.trim());
      setCity("");
    }
  };
  return /* @__PURE__ */ (0, import_jsx_dev_runtime.jsxDEV)("form", { onSubmit: handleSubmit, children: /* @__PURE__ */ (0, import_jsx_dev_runtime.jsxDEV)(Box_default, { display: "flex", alignItems: "center", children: [
    /* @__PURE__ */ (0, import_jsx_dev_runtime.jsxDEV)(TextField_default, { fullWidth: true, label: "Add a city", name: "city", value: city, onChange: (e) => setCity(e.target.value), variant: "outlined", InputProps: {
      startAdornment: /* @__PURE__ */ (0, import_jsx_dev_runtime.jsxDEV)(InputAdornment_default, { position: "start", children: /* @__PURE__ */ (0, import_jsx_dev_runtime.jsxDEV)(import_AddLocation.default, {}, void 0, false, {
        fileName: "app/components/AddCityForm.tsx",
        lineNumber: 41,
        columnNumber: 17
      }, this) }, void 0, false, {
        fileName: "app/components/AddCityForm.tsx",
        lineNumber: 40,
        columnNumber: 25
      }, this),
      inputProps: {
        "data-testid": "add-city-input"
      }
    }, sx: {
      mr: 2
    } }, void 0, false, {
      fileName: "app/components/AddCityForm.tsx",
      lineNumber: 39,
      columnNumber: 9
    }, this),
    /* @__PURE__ */ (0, import_jsx_dev_runtime.jsxDEV)(Button_default, { type: "submit", variant: "contained", color: "primary", "data-testid": "add-city-button", sx: {
      height: "100%",
      padding: "12px",
      fontSize: "1rem",
      backgroundColor: "#00bcd4",
      "&:hover": {
        backgroundColor: "#0097a7"
      }
    }, children: "Search" }, void 0, false, {
      fileName: "app/components/AddCityForm.tsx",
      lineNumber: 49,
      columnNumber: 9
    }, this)
  ] }, void 0, true, {
    fileName: "app/components/AddCityForm.tsx",
    lineNumber: 38,
    columnNumber: 7
  }, this) }, void 0, false, {
    fileName: "app/components/AddCityForm.tsx",
    lineNumber: 37,
    columnNumber: 10
  }, this);
}
_s(AddCityForm, "NjhooW53FpaNk4X2HDZYlDFe0P4=");
_c = AddCityForm;
var _c;
$RefreshReg$(_c, "AddCityForm");
window.$RefreshReg$ = prevRefreshReg;
window.$RefreshSig$ = prevRefreshSig;

// app/components/WeatherCard.tsx
var import_Delete = __toESM(require_Delete());
var import_Air = __toESM(require_Air());
var import_Opacity = __toESM(require_Opacity());
var import_Umbrella = __toESM(require_Umbrella());
var import_jsx_dev_runtime2 = __toESM(require_jsx_dev_runtime());
if (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {
  console.warn("remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.");
} else {
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = (type, id) => {
    window.$RefreshRuntime$.register(type, '"app/components/WeatherCard.tsx"' + id);
  };
  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;
}
var prevRefreshReg;
var prevRefreshSig;
if (import.meta) {
  import.meta.hot = createHotContext(
    //@ts-expect-error
    "app/components/WeatherCard.tsx"
  );
  import.meta.hot.lastModified = "1721407410732.9565";
}
function WeatherCard({
  data,
  onRemove,
  isLoading = false
}) {
  var _a, _b, _c4, _d, _e, _f, _g, _h, _i, _j;
  const handleRemove = () => {
    onRemove(data.storedName);
  };
  if (data.error) {
    return /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Card_default, { sx: {
      bgcolor: "rgba(244, 67, 54, 0.1)",
      backdropFilter: "blur(10px)",
      color: "#fff",
      p: 2,
      borderRadius: 4,
      height: "100%",
      boxShadow: "0 4px 30px rgba(0, 0, 0, 0.1)",
      border: "1px solid rgba(255, 255, 255, 0.1)"
    }, children: [
      /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Typography_default, { "data-testid": "error-message", children: data.error.message }, void 0, false, {
        fileName: "app/components/WeatherCard.tsx",
        lineNumber: 45,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(IconButton_default, { color: "inherit", size: "small", onClick: handleRemove, "data-testid": "delete-button", children: /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(import_Delete.default, {}, void 0, false, {
        fileName: "app/components/WeatherCard.tsx",
        lineNumber: 49,
        columnNumber: 11
      }, this) }, void 0, false, {
        fileName: "app/components/WeatherCard.tsx",
        lineNumber: 48,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "app/components/WeatherCard.tsx",
      lineNumber: 35,
      columnNumber: 12
    }, this);
  }
  return /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Card_default, { sx: {
    bgcolor: "rgba(255, 255, 255, 0.1)",
    backdropFilter: "blur(10px)",
    color: "white",
    borderRadius: 4,
    p: 3,
    position: "relative",
    height: "100%",
    display: "flex",
    flexDirection: "column",
    justifyContent: "space-between",
    minHeight: "400px",
    maxWidth: "300px",
    margin: "auto",
    boxShadow: "0 4px 30px rgba(0, 0, 0, 0.1)",
    border: "1px solid rgba(255, 255, 255, 0.1)",
    transition: "all 0.3s ease",
    "&:hover": {
      transform: "scale(1.02)",
      boxShadow: "0 6px 40px rgba(0, 0, 0, 0.2)"
    }
  }, "data-testid": "weather-card", children: [
    /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(IconButton_default, { sx: {
      position: "absolute",
      top: 8,
      right: 8,
      color: "rgba(255, 255, 255, 0.7)",
      "&:hover": {
        color: "white"
      }
    }, onClick: handleRemove, "data-testid": `delete-city-${(_a = data.location) == null ? void 0 : _a.name}`, children: /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(import_Delete.default, {}, void 0, false, {
      fileName: "app/components/WeatherCard.tsx",
      lineNumber: 84,
      columnNumber: 9
    }, this) }, void 0, false, {
      fileName: "app/components/WeatherCard.tsx",
      lineNumber: 75,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Typography_default, { variant: "h6", sx: {
      textAlign: "center",
      mb: 1
    }, "data-testid": `city-name-${(_b = data.location) == null ? void 0 : _b.name}`, children: (_c4 = data.location) == null ? void 0 : _c4.name }, void 0, false, {
      fileName: "app/components/WeatherCard.tsx",
      lineNumber: 87,
      columnNumber: 7
    }, this),
    isLoading ? /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Box_default, { sx: {
      display: "flex",
      justifyContent: "center",
      alignItems: "center",
      height: "100%"
    }, "data-testid": "loading-spinner", children: /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(CircularProgress_default, {}, void 0, false, {
      fileName: "app/components/WeatherCard.tsx",
      lineNumber: 100,
      columnNumber: 11
    }, this) }, void 0, false, {
      fileName: "app/components/WeatherCard.tsx",
      lineNumber: 94,
      columnNumber: 20
    }, this) : /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(import_jsx_dev_runtime2.Fragment, { children: [
      /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Box_default, { sx: {
        textAlign: "center",
        mb: 3
      }, children: /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)("img", { src: (_d = data.current) == null ? void 0 : _d.condition.icon, alt: (_e = data.current) == null ? void 0 : _e.condition.text, style: {
        width: "80px",
        height: "80px"
      }, "data-testid": "weather-icon" }, void 0, false, {
        fileName: "app/components/WeatherCard.tsx",
        lineNumber: 106,
        columnNumber: 13
      }, this) }, void 0, false, {
        fileName: "app/components/WeatherCard.tsx",
        lineNumber: 102,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Typography_default, { variant: "h2", component: "div", sx: {
        fontWeight: "bold",
        textAlign: "center",
        mb: 2,
        color: "#4CAF50"
      }, "data-testid": "temperature", children: [
        Math.round(((_f = data.current) == null ? void 0 : _f.temp_c) || 0),
        "\xB0"
      ] }, void 0, true, {
        fileName: "app/components/WeatherCard.tsx",
        lineNumber: 112,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Typography_default, { variant: "h6", sx: {
        textAlign: "center",
        mb: 2
      }, "data-testid": "condition-text", children: (_g = data.current) == null ? void 0 : _g.condition.text }, void 0, false, {
        fileName: "app/components/WeatherCard.tsx",
        lineNumber: 121,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Typography_default, { variant: "body2", sx: {
        textAlign: "center",
        mb: 3,
        color: "rgba(255, 255, 255, 0.7)"
      }, "data-testid": "date", children: (/* @__PURE__ */ new Date()).toLocaleDateString("en-US", {
        weekday: "long",
        day: "numeric",
        month: "long"
      }) }, void 0, false, {
        fileName: "app/components/WeatherCard.tsx",
        lineNumber: 128,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Box_default, { sx: {
        mt: "auto"
      }, children: [
        /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Box_default, { sx: {
          display: "flex",
          justifyContent: "space-between",
          alignItems: "center",
          mb: 2
        }, "data-testid": "wind-info", children: [
          /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Box_default, { sx: {
            display: "flex",
            alignItems: "center"
          }, children: [
            /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(import_Air.default, { sx: {
              mr: 1,
              fontSize: 24,
              color: "rgba(255, 255, 255, 0.7)"
            } }, void 0, false, {
              fileName: "app/components/WeatherCard.tsx",
              lineNumber: 153,
              columnNumber: 17
            }, this),
            /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Typography_default, { variant: "body1", children: [
              (_h = data.current) == null ? void 0 : _h.wind_kph,
              " km/h"
            ] }, void 0, true, {
              fileName: "app/components/WeatherCard.tsx",
              lineNumber: 158,
              columnNumber: 17
            }, this)
          ] }, void 0, true, {
            fileName: "app/components/WeatherCard.tsx",
            lineNumber: 149,
            columnNumber: 15
          }, this),
          /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Typography_default, { variant: "body2", sx: {
            color: "rgba(255, 255, 255, 0.7)"
          }, children: "Wind" }, void 0, false, {
            fileName: "app/components/WeatherCard.tsx",
            lineNumber: 162,
            columnNumber: 15
          }, this)
        ] }, void 0, true, {
          fileName: "app/components/WeatherCard.tsx",
          lineNumber: 143,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Box_default, { sx: {
          display: "flex",
          justifyContent: "space-between",
          alignItems: "center",
          mb: 2
        }, "data-testid": "precip-info", children: [
          /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Box_default, { sx: {
            display: "flex",
            alignItems: "center"
          }, children: [
            /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(import_Umbrella.default, { sx: {
              mr: 1,
              fontSize: 24,
              color: "rgba(255, 255, 255, 0.7)"
            } }, void 0, false, {
              fileName: "app/components/WeatherCard.tsx",
              lineNumber: 179,
              columnNumber: 17
            }, this),
            /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Typography_default, { variant: "body1", children: [
              (_i = data.current) == null ? void 0 : _i.precip_mm,
              "mm"
            ] }, void 0, true, {
              fileName: "app/components/WeatherCard.tsx",
              lineNumber: 184,
              columnNumber: 17
            }, this)
          ] }, void 0, true, {
            fileName: "app/components/WeatherCard.tsx",
            lineNumber: 175,
            columnNumber: 15
          }, this),
          /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Typography_default, { variant: "body2", sx: {
            color: "rgba(255, 255, 255, 0.7)"
          }, children: "Precipitation" }, void 0, false, {
            fileName: "app/components/WeatherCard.tsx",
            lineNumber: 188,
            columnNumber: 15
          }, this)
        ] }, void 0, true, {
          fileName: "app/components/WeatherCard.tsx",
          lineNumber: 169,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Box_default, { sx: {
          display: "flex",
          justifyContent: "space-between",
          alignItems: "center"
        }, "data-testid": "humidity-info", children: [
          /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Box_default, { sx: {
            display: "flex",
            alignItems: "center"
          }, children: [
            /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(import_Opacity.default, { sx: {
              mr: 1,
              fontSize: 24,
              color: "rgba(255, 255, 255, 0.7)"
            } }, void 0, false, {
              fileName: "app/components/WeatherCard.tsx",
              lineNumber: 204,
              columnNumber: 17
            }, this),
            /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Typography_default, { variant: "body1", children: [
              (_j = data.current) == null ? void 0 : _j.humidity,
              "%"
            ] }, void 0, true, {
              fileName: "app/components/WeatherCard.tsx",
              lineNumber: 209,
              columnNumber: 17
            }, this)
          ] }, void 0, true, {
            fileName: "app/components/WeatherCard.tsx",
            lineNumber: 200,
            columnNumber: 15
          }, this),
          /* @__PURE__ */ (0, import_jsx_dev_runtime2.jsxDEV)(Typography_default, { variant: "body2", sx: {
            color: "rgba(255, 255, 255, 0.7)"
          }, children: "Humidity" }, void 0, false, {
            fileName: "app/components/WeatherCard.tsx",
            lineNumber: 213,
            columnNumber: 15
          }, this)
        ] }, void 0, true, {
          fileName: "app/components/WeatherCard.tsx",
          lineNumber: 195,
          columnNumber: 13
        }, this)
      ] }, void 0, true, {
        fileName: "app/components/WeatherCard.tsx",
        lineNumber: 140,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "app/components/WeatherCard.tsx",
      lineNumber: 101,
      columnNumber: 18
    }, this)
  ] }, void 0, true, {
    fileName: "app/components/WeatherCard.tsx",
    lineNumber: 53,
    columnNumber: 10
  }, this);
}
_c2 = WeatherCard;
var _c2;
$RefreshReg$(_c2, "WeatherCard");
window.$RefreshReg$ = prevRefreshReg;
window.$RefreshSig$ = prevRefreshSig;

// app/routes/weather.tsx
var import_jsx_dev_runtime3 = __toESM(require_jsx_dev_runtime());
if (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {
  console.warn("remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.");
} else {
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = (type, id) => {
    window.$RefreshRuntime$.register(type, '"app/routes/weather.tsx"' + id);
  };
  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;
}
var prevRefreshReg;
var prevRefreshSig;
var _s2 = $RefreshSig$();
if (import.meta) {
  import.meta.hot = createHotContext(
    //@ts-expect-error
    "app/routes/weather.tsx"
  );
  import.meta.hot.lastModified = "1721396966594.6848";
}
function Weather() {
  _s2();
  const {
    weatherData,
    userId,
    username
  } = useLoaderData();
  const actionData = useActionData();
  const fetcher = useFetcher();
  const [snackbar, setSnackbar] = (0, import_react3.useState)({
    open: false,
    message: "",
    severity: "error"
  });
  const [optimisticWeatherData, setOptimisticWeatherData] = (0, import_react3.useState)(weatherData);
  (0, import_react3.useEffect)(() => {
    setOptimisticWeatherData(weatherData);
  }, [weatherData]);
  (0, import_react3.useEffect)(() => {
    var _a, _b, _c4, _d;
    const handleSnackbar = (message, severity) => {
      setSnackbar({
        open: true,
        message,
        severity
      });
    };
    if ((actionData == null ? void 0 : actionData.error) || ((_a = fetcher.data) == null ? void 0 : _a.error)) {
      handleSnackbar((actionData == null ? void 0 : actionData.error) || ((_b = fetcher.data) == null ? void 0 : _b.error), "error");
      if (fetcher.formData) {
        const cityToRemove = fetcher.formData.get("city");
        setOptimisticWeatherData((prev) => prev.filter((data) => data.storedName !== cityToRemove));
      }
    } else if ((actionData == null ? void 0 : actionData.success) || ((_c4 = fetcher.data) == null ? void 0 : _c4.success)) {
      handleSnackbar((actionData == null ? void 0 : actionData.success) || ((_d = fetcher.data) == null ? void 0 : _d.success), "success");
    }
  }, [actionData, fetcher.data, fetcher.formData]);
  (0, import_react3.useEffect)(() => {
    var _a, _b;
    if (fetcher.state === "submitting") {
      const action = (_a = fetcher.formData) == null ? void 0 : _a.get("_action");
      const city = (_b = fetcher.formData) == null ? void 0 : _b.get("city");
      if (action === "add" && city) {
        setOptimisticWeatherData((prev) => [...prev, {
          location: {
            name: city
          },
          current: {
            temp_c: 0,
            condition: {
              text: "Loading...",
              icon: ""
            },
            humidity: 0,
            precip_mm: 0,
            wind_kph: 0
          },
          storedName: city
        }]);
      }
    }
  }, [fetcher.state, fetcher.formData]);
  const handleAddCity = (city) => fetcher.submit({
    _action: "add",
    city
  }, {
    method: "post"
  });
  const handleRemoveCity = (cityToRemove) => {
    setOptimisticWeatherData((prev) => prev.filter((data) => data.storedName !== cityToRemove));
    fetcher.submit({
      _action: "remove",
      city: cityToRemove
    }, {
      method: "post"
    });
  };
  const handleSnackbarClose = (event, reason) => {
    if (reason === "clickaway")
      return;
    setSnackbar((prev) => ({
      ...prev,
      open: false
    }));
  };
  return /* @__PURE__ */ (0, import_jsx_dev_runtime3.jsxDEV)(Container_default, { maxWidth: "lg", sx: {
    py: 4,
    bgcolor: "#121212",
    minHeight: "100vh"
  }, children: [
    /* @__PURE__ */ (0, import_jsx_dev_runtime3.jsxDEV)(Typography_default, { variant: "h4", component: "h1", gutterBottom: true, sx: {
      color: "white",
      mb: 4
    }, "data-testid": "welcome-message", children: [
      "Welcome to the weather app, ",
      username || userId,
      " "
    ] }, void 0, true, {
      fileName: "app/routes/weather.tsx",
      lineNumber: 154,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ (0, import_jsx_dev_runtime3.jsxDEV)(AddCityForm, { onAddCity: handleAddCity }, void 0, false, {
      fileName: "app/routes/weather.tsx",
      lineNumber: 161,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ (0, import_jsx_dev_runtime3.jsxDEV)(Grid_default, { container: true, spacing: 3, sx: {
      mt: 4
    }, "data-testid": "weather-cards", children: optimisticWeatherData.map((data, index) => {
      var _a;
      return /* @__PURE__ */ (0, import_jsx_dev_runtime3.jsxDEV)(Grid_default, { item: true, xs: 12, sm: 6, md: 4, lg: 3, children: /* @__PURE__ */ (0, import_jsx_dev_runtime3.jsxDEV)(WeatherCard, { data, onRemove: handleRemoveCity, isLoading: ((_a = data.current) == null ? void 0 : _a.condition.text) === "Loading..." }, void 0, false, {
        fileName: "app/routes/weather.tsx",
        lineNumber: 166,
        columnNumber: 13
      }, this) }, index, false, {
        fileName: "app/routes/weather.tsx",
        lineNumber: 165,
        columnNumber: 53
      }, this);
    }) }, void 0, false, {
      fileName: "app/routes/weather.tsx",
      lineNumber: 162,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ (0, import_jsx_dev_runtime3.jsxDEV)(Snackbar_default, { open: snackbar.open, autoHideDuration: 6e3, onClose: handleSnackbarClose, anchorOrigin: {
      vertical: "top",
      horizontal: "center"
    }, children: /* @__PURE__ */ (0, import_jsx_dev_runtime3.jsxDEV)(Alert_default, { onClose: handleSnackbarClose, severity: snackbar.severity, sx: {
      width: "100%"
    }, "data-testid": "snackbar-message", children: snackbar.message }, void 0, false, {
      fileName: "app/routes/weather.tsx",
      lineNumber: 173,
      columnNumber: 9
    }, this) }, void 0, false, {
      fileName: "app/routes/weather.tsx",
      lineNumber: 169,
      columnNumber: 7
    }, this)
  ] }, void 0, true, {
    fileName: "app/routes/weather.tsx",
    lineNumber: 149,
    columnNumber: 10
  }, this);
}
_s2(Weather, "S/QXG4HCSKI1kwd3y/LBZmj0+pQ=", false, function() {
  return [useLoaderData, useActionData, useFetcher];
});
_c3 = Weather;
var _c3;
$RefreshReg$(_c3, "Weather");
window.$RefreshReg$ = prevRefreshReg;
window.$RefreshSig$ = prevRefreshSig;
export {
  Weather as default
};
//# sourceMappingURL=/build/routes/weather-BTPURM6H.js.map
